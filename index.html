<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LinguaParrot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        :root {
            --tg-bg: var(--tg-theme-bg-color, #F8F9FA);
            --tg-text: var(--tg-theme-text-color, #2C3E50);
            --tg-hint: var(--tg-theme-hint-color, #7F8C8D);
            --tg-link: var(--tg-theme-link-color, #2D7A5F);
            --tg-button: var(--tg-theme-button-color, #2D7A5F);
            --tg-button-text: var(--tg-theme-button-text-color, #FFFFFF);
            --primary: #2D7A5F;
            --primary-light: #3D9A7A;
            --accent: #F4A261;
            --success: #27AE60;
            --error: #E74C3C;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        body { 
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: var(--tg-bg); 
            color: var(--tg-text); 
            min-height: 100vh;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .app-container { max-width: 430px; margin: 0 auto; min-height: 100vh; position: relative; padding: 16px; }
        
        .tg-header {
            position: sticky;
            top: 0;
            background: var(--tg-bg);
            z-index: 100;
            padding: 8px 0 16px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .tg-header-title {
            font-size: 24px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tg-close-btn {
            position: absolute;
            top: 8px;
            right: 0;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--tg-hint);
        }
        
        .tg-main-btn {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--tg-button);
            color: var(--tg-button-text);
            border: none;
            padding: 16px 24px 32px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .tg-main-btn.show { transform: translateY(0); }
        
        .card {
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
        }
        
        .daily-goal {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 20px;
            padding: 24px;
            color: white;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .goal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .goal-title { font-size: 17px; font-weight: 700; opacity: 0.9; }
        .goal-time { font-size: 28px; font-weight: 800; }
        .progress-bar { height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: white; border-radius: 3px; transition: width 0.5s ease; width: 0%; }
        
        .mode-toggle {
            display: flex;
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .mode-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 10px;
            font-family: inherit;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            color: var(--tg-hint);
            transition: all 0.2s ease;
        }
        
        .mode-btn.active { background: var(--primary); color: white; }
        
        .tutor-card {
            display: flex;
            align-items: center;
            gap: 16px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .tutor-card:active { transform: scale(0.98); }
        
        .tutor-avatar {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--accent) 0%, #F4D35E 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            position: relative;
            flex-shrink: 0;
        }
        
        .tutor-avatar::after {
            content: '';
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 12px;
            height: 12px;
            background: var(--success);
            border: 2px solid white;
            border-radius: 50%;
        }
        
        .tutor-info { flex: 1; }
        .tutor-name { font-size: 17px; font-weight: 700; margin-bottom: 4px; }
        .tutor-status { font-size: 14px; color: var(--tg-hint); display: flex; align-items: center; gap: 6px; }
        .pulse { animation: pulse 2s infinite; color: var(--success); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        
        .arrow { color: var(--tg-hint); font-size: 20px; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .stat-card { text-align: center; padding: 20px 16px; }
        .stat-value { font-size: 32px; font-weight: 800; color: var(--primary); margin-bottom: 4px; }
        .stat-label { font-size: 13px; color: var(--tg-hint); font-weight: 600; }
        
        .section-title { font-size: 17px; font-weight: 700; margin-bottom: 12px; margin-top: 8px; }
        
        .level-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .level-card {
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.2s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .level-card:active { transform: scale(0.98); }
        .level-card.active { border-color: var(--primary); }
        .level-card.locked { opacity: 0.5; pointer-events: none; }
        
        .level-number {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
            margin: 0 auto 12px;
        }
        
        .level-card.locked .level-number { background: var(--tg-hint); }
        .level-name { font-weight: 700; font-size: 15px; margin-bottom: 4px; }
        .level-progress { font-size: 13px; color: var(--tg-hint); }
        .level-status { position: absolute; top: 8px; right: 8px; font-size: 20px; }
        
        .lesson-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--tg-bg);
            z-index: 100;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }
        
        .lesson-screen.active { display: block; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        
        .lesson-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: var(--tg-bg);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .back-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: var(--tg-theme-secondary-bg-color, #F0F0F0);
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .progress-dots { display: flex; gap: 6px; flex: 1; justify-content: center; }
        .dot { width: 6px; height: 6px; border-radius: 50%; background: var(--tg-hint); opacity: 0.3; transition: all 0.3s ease; }
        .dot.active { background: var(--primary); opacity: 1; width: 20px; border-radius: 3px; }
        .dot.completed { background: var(--success); opacity: 1; }
        
        .flashcard-container { padding: 20px 16px 100px; }
        
        .flashcard {
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 20px;
            padding: 40px 24px;
            text-align: center;
            min-height: 320px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }
        
        .flashcard.flipped { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); color: white; }
        .flashcard-word { font-size: 32px; font-weight: 800; margin-bottom: 16px; }
        .flashcard-trans { font-size: 15px; opacity: 0.6; margin-bottom: 8px; font-family: monospace; }
        .flashcard-rus-trans { font-size: 16px; color: var(--accent); margin-bottom: 20px; font-weight: 600; display: none; }
        .flashcard.flipped .flashcard-rus-trans { color: rgba(255,255,255,0.9); display: block; }
        .flashcard-meaning { font-size: 24px; font-weight: 700; opacity: 0; transform: translateY(20px); transition: all 0.3s ease; }
        .flashcard.flipped .flashcard-meaning { opacity: 1; transform: translateY(0); }
        
        .flip-hint {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 13px;
            opacity: 0.5;
            background: rgba(0,0,0,0.05);
            padding: 6px 14px;
            border-radius: 20px;
        }
        
        .detail-card {
            background: rgba(45, 122, 95, 0.08);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
            display: none;
        }
        
        .detail-card.show { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .detail-title { font-size: 13px; font-weight: 800; color: var(--primary); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; }
        .detail-example { font-size: 16px; font-style: italic; margin-bottom: 8px; padding: 16px; background: var(--tg-theme-secondary-bg-color, #FFFFFF); border-radius: 12px; }
        .detail-translation { font-size: 14px; color: var(--tg-hint); padding-left: 12px; border-left: 3px solid var(--accent); }
        
        .trans-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 12px;
            margin-bottom: 16px;
            font-size: 15px;
            font-weight: 600;
        }
        
        .toggle-switch {
            width: 50px;
            height: 28px;
            background: var(--tg-hint);
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.3;
        }
        
        .toggle-switch.active { background: var(--primary); opacity: 1; }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .toggle-switch.active::after { left: 26px; }
        
        .result-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--tg-bg);
            z-index: 200;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 24px;
            text-align: center;
        }
        
        .result-screen.active { display: flex; }
        .result-emoji { font-size: 80px; margin-bottom: 20px; }
        .result-title { font-size: 28px; font-weight: 800; margin-bottom: 8px; }
        .result-subtitle { color: var(--tg-hint); margin-bottom: 32px; }
        
        .result-stats {
            background: var(--tg-theme-secondary-bg-color, #FFFFFF);
            border-radius: 16px;
            padding: 24px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 24px;
        }
        
        .result-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 16px; }
        .result-row:last-child { border-bottom: none; }
        .result-value { font-weight: 800; color: var(--primary); }
        .result-value.xp { color: var(--accent); }
        
        .haptic:active { opacity: 0.7; }
    </style>
</head>
<body>
    <div class="app-container" id="app">
        <div class="screen active" id="mainScreen">
            <div class="tg-header">
                <div class="tg-header-title">ü¶ú LinguaParrot</div>
                <button class="tg-close-btn" onclick="tg.close()">‚úï</button>
            </div>
            
            <div class="daily-goal">
                <div class="goal-header">
                    <div>
                        <div class="goal-title">–¶–µ–ª—å –¥–Ω—è</div>
                        <div class="goal-time"><span id="dailyProgress">0</span>/15 –º–∏–Ω</div>
                    </div>
                    <div style="font-size: 40px;">üî•</div>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>
            </div>
            
            <div class="mode-toggle">
                <button class="mode-btn active" onclick="setMode(this, 'calm')">üåø –°–ø–æ–∫–æ–π–Ω—ã–π</button>
                <button class="mode-btn" onclick="setMode(this, 'strict')">üìö –°—Ç—Ä–æ–≥–∏–π</button>
            </div>
            
            <div class="card tutor-card haptic" onclick="openChat()">
                <div class="tutor-avatar">ü¶ú</div>
                <div class="tutor-info">
                    <div class="tutor-name">–ü–æ–ø—É–≥–∞–π-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä</div>
                    <div class="tutor-status"><span class="pulse">‚óè</span> –û–Ω–ª–∞–π–Ω ‚Ä¢ –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</div>
                </div>
                <div class="arrow">‚Ä∫</div>
            </div>
            
            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="stat-value" id="wordsCount">0</div>
                    <div class="stat-label">–°–ª–æ–≤ –∏–∑—É—á–µ–Ω–æ</div>
                </div>
                <div class="card stat-card">
                    <div class="stat-value" id="streakCount">0</div>
                    <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                </div>
            </div>
            
            <div class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</div>
            <div class="level-grid" id="levelGrid"></div>
        </div>
        
        <div class="lesson-screen" id="lessonScreen">
            <div class="lesson-header">
                <button class="back-btn haptic" onclick="closeLesson()">‚Üê</button>
                <div class="progress-dots" id="progressDots"></div>
                <div style="width: 36px;"></div>
            </div>
            
            <div class="flashcard-container">
                <div class="trans-toggle">
                    <span>üî§ –†—É—Å—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è</span>
                    <div class="toggle-switch" id="transToggle" onclick="toggleTrans()"></div>
                </div>
                
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="flashcard-word" id="cardWord"></div>
                    <div class="flashcard-trans" id="cardTrans"></div>
                    <div class="flashcard-rus-trans" id="cardRusTrans"></div>
                    <div class="flashcard-meaning" id="cardMeaning"></div>
                    <div class="flip-hint">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å</div>
                </div>
                
                <div class="detail-card" id="detailCard">
                    <div class="detail-title">üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</div>
                    <div class="detail-example" id="detailExample"></div>
                    <div class="detail-translation" id="detailTranslation"></div>
                </div>
            </div>
        </div>
        
        <div class="result-screen" id="resultScreen">
            <div class="result-emoji">üéâ</div>
            <div class="result-title">–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</div>
            <div class="result-subtitle" id="resultSubtitle"></div>
            
            <div class="result-stats">
                <div class="result-row">
                    <span>–ò–∑—É—á–µ–Ω–æ —Å–ª–æ–≤</span>
                    <span class="result-value" id="resultWords">10</span>
                </div>
                <div class="result-row">
                    <span>–í—Ä–µ–º—è</span>
                    <span class="result-value" id="timeValue">0:00</span>
                </div>
                <div class="result-row">
                    <span>–û–ø—ã—Ç</span>
                    <span class="result-value xp" id="resultXP">+100 XP</span>
                </div>
            </div>
            
            <button class="tg-main-btn show" onclick="finishLesson()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        const levels = [
            {
                id: 1,
                name: '–ù–æ–≤–∏—á–æ–∫',
                description: '–ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞',
                words: [
                    { word: 'Serendipity', trans: '/Àåser.…ônÀàd…™p.…ô.ti/', rus: '[—Å—ç-—Ä—ç–Ω-–¥–∏-–ø–∏-—Ç–∏]', meaning: '–°—á–∞—Å—Ç–ª–∏–≤–∞—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å', example: '"Meeting her was pure serendipity."', exampleRu: '"–í—Å—Ç—Ä–µ—á–∞ —Å –Ω–µ–π –±—ã–ª–∞ —á–∏—Å—Ç–æ–π —Å–ª—É—á–∞–π–Ω–æ—Å—Ç—å—é"' },
                    { word: 'Ephemeral', trans: '/…™Ààfem.…ôr.…ôl/', rus: '[–∏-—Ñ—ç-–º—ç-—Ä–ª]', meaning: '–ú–∏–º–æ–ª—ë—Ç–Ω—ã–π', example: '"Fame in the internet age is ephemeral."', exampleRu: '"–°–ª–∞–≤–∞ –≤ —ç–ø–æ—Ö—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –º–∏–º–æ–ª—ë—Ç–Ω–∞."' },
                    { word: 'Resilience', trans: '/r…™Ààz…™l.j…ôns/', rus: '[—Ä–∏-–∑–∏-–ª–π—ç–Ω—Å]', meaning: '–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å', example: '"Her resilience helped her overcome all difficulties."', exampleRu: '"–ï—ë –∂–∏–∑–Ω–µ—Å—Ç–æ–π–∫–æ—Å—Ç—å –ø–æ–º–æ–≥–ª–∞ –ø—Ä–µ–æ–¥–æ–ª–µ—Ç—å —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏."' },
                    { word: 'Eloquent', trans: '/Ààel.…ô.kw…ônt/', rus: '[—ç-–ª—ç-–∫–≤—ç–Ω—Ç]', meaning: '–ö—Ä–∞—Å–Ω–æ—Ä–µ—á–∏–≤—ã–π', example: '"He gave an eloquent speech about freedom."', exampleRu: '"–û–Ω –ø—Ä–æ–∏–∑–Ω—ë—Å –∫—Ä–∞—Å–Ω–æ—Ä–µ—á–∏–≤—É—é —Ä–µ—á—å –æ —Å–≤–æ–±–æ–¥–µ."' },
                    { word: 'Mellifluous', trans: '/meÀàl…™f.lu.…ôs/', rus: '[–º—ç-–ª–∏-—Ñ–ª—É-—ç—Å]', meaning: '–ú–µ–¥–æ–≤—ã–π, –ø–ª–∞–≤–Ω—ã–π', example: '"She had a rich, mellifluous voice."', exampleRu: '"–£ –Ω–µ—ë –±—ã–ª –±–æ–≥–∞—Ç—ã–π, –ø–ª–∞–≤–Ω—ã–π –≥–æ–ª–æ—Å."' },
                    { word: 'Luminous', trans: '/ÀàluÀê.m…ô.n…ôs/', rus: '[–ª—É-–º—ç-–Ω—ç—Å]', meaning: '–°–≤–µ—Ç—è—â–∏–π—Å—è', example: '"The luminous moon lit up the night sky."', exampleRu: '"–°–≤–µ—Ç—è—â–∞—è—Å—è –ª—É–Ω–∞ –æ—Å–≤–µ—Ç–∏–ª–∞ –Ω–æ—á–Ω–æ–µ –Ω–µ–±–æ."' },
                    { word: 'Ethereal', trans: '/…™ÀàŒ∏…™…ô.ri.…ôl/', rus: '[–∏-—Ñ–∏—ç-—Ä–∏-—ç–ª]', meaning: '–ù–µ–±–µ—Å–Ω—ã–π, –≤–æ–∑–¥—É—à–Ω—ã–π', example: '"The ballet dancer moved with ethereal grace."', exampleRu: '"–ë–∞–ª–µ—Ä–∏–Ω–∞ –¥–≤–∏–≥–∞–ª–∞—Å—å —Å –Ω–µ–±–µ—Å–Ω–æ–π –≥—Ä–∞—Ü–∏–µ–π."' },
                    { word: 'Sonorous', trans: '/Ààs…ín.…ôr.…ôs/', rus: '[—Å–æ-–Ω—ç-—Ä—ç—Å]', meaning: '–ó–≤—É—á–Ω—ã–π', example: '"His sonorous voice filled the concert hall."', exampleRu: '"–ï–≥–æ –∑–≤—É—á–Ω—ã–π –≥–æ–ª–æ—Å –Ω–∞–ø–æ–ª–Ω–∏–ª –∫–æ–Ω—Ü–µ—Ä—Ç–Ω—ã–π –∑–∞–ª."' },
                    { word: 'Effervescent', trans: '/Àåef.…ôÀàves.…ônt/', rus: '[—ç-—Ñ—ç-–≤—ç-—Å—ç–Ω—Ç]', meaning: '–ò–≥—Ä–∏—Å—Ç—ã–π, –ø—É–∑—ã—Ä—è—â–∏–π—Å—è', example: '"Her effervescent personality lit up the room."', exampleRu: '"–ï—ë –∏–≥—Ä–∏–≤–∞—è –ª–∏—á–Ω–æ—Å—Ç—å –æ—Å–≤–µ—Ç–∏–ª–∞ –∫–æ–º–Ω–∞—Ç—É."' },
                    { word: 'Serene', trans: '/s…ôÀàriÀên/', rus: '[—Å—ç-—Ä–∏–Ω]', meaning: '–ë–µ–∑–º—è—Ç–µ–∂–Ω—ã–π', example: '"The lake was serene in the morning light."', exampleRu: '"–û–∑–µ—Ä–æ –±—ã–ª–æ –±–µ–∑–º—è—Ç–µ–∂–Ω—ã–º –≤ —É—Ç—Ä–µ–Ω–Ω–µ–º —Å–≤–µ—Ç–µ."' }
                ]
            },
            {
                id: 2,
                name: '–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π',
                description: '–ü—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞',
                words: [
                    { word: 'Ineffable', trans: '/…™nÀàef.…ô.b…ôl/', rus: '[–∏–Ω-—ç-—Ñ—ç-–±–ª]', meaning: '–ù–µ–≤—ã—Ä–∞–∑–∏–º—ã–π', example: '"The beauty of the sunset was ineffable."', exampleRu: '"–ö—Ä–∞—Å–æ—Ç–∞ –∑–∞–∫–∞—Ç–∞ –±—ã–ª–∞ –Ω–µ–≤—ã—Ä–∞–∑–∏–º–æ–π."' },
                    { word: 'Hiraeth', trans: '/Ààh…™ra…™Œ∏/', rus: '[—Ö–∏-—Ä–∞–π—Å]', meaning: '–¢–æ—Å–∫–∞ –ø–æ –¥–æ–º—É', example: '"She felt hiraeth for her childhood home."', exampleRu: '"–û–Ω–∞ —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —Ç–æ—Å–∫—É –ø–æ –¥–æ–º—É –¥–µ—Ç—Å—Ç–≤–∞."' },
                    { word: 'Petrichor', trans: '/Ààpet.r…™.k…îÀêr/', rus: '[–ø–µ-—Ç—Ä–∏-–∫–æ—Ä]', meaning: '–ó–∞–ø–∞—Ö –¥–æ–∂–¥—è', example: '"I love the smell of petrichor after summer rain."', exampleRu: '"–Ø –ª—é–±–ª—é –∑–∞–ø–∞—Ö –¥–æ–∂–¥—è –ø–æ—Å–ª–µ –ª–µ—Ç–Ω–µ–≥–æ –¥–æ–∂–¥—è."' },
                    { word: 'Limerence', trans: '/Ààl…™m.…ôr.…ôns/', rus: '[–ª–∏-–º—ç-—Ä–∞–Ω—Å]', meaning: '–í–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç—å', example: '"His limerence for her was obvious to everyone."', exampleRu: '"–ï–≥–æ –≤–ª—é–±–ª—ë–Ω–Ω–æ—Å—Ç—å –≤ –Ω–µ—ë –±—ã–ª–∞ –æ—á–µ–≤–∏–¥–Ω–∞ –≤—Å–µ–º."' },
                    { word: 'Sonder', trans: '/Ààs…ín.d…ôr/', rus: '[—Å–æ–Ω-–¥—ç]', meaning: '–û—Å–æ–∑–Ω–∞–Ω–∏–µ —á—É–∂–∏—Ö –∂–∏–∑–Ω–µ–π', example: '"Sonder hit me as I watched the busy street."', exampleRu: '"–û—Å–æ–∑–Ω–∞–Ω–∏–µ —á—É–∂–∏—Ö –∂–∏–∑–Ω–µ–π –ø–æ—Ä–∞–∑–∏–ª–æ –º–µ–Ω—è, –∫–æ–≥–¥–∞ —è —Å–º–æ—Ç—Ä–µ–ª –Ω–∞ –æ–∂–∏–≤–ª—ë–Ω–Ω—É—é —É–ª–∏—Ü—É."' },
                    { word: 'Vellichor', trans: '/Ààvel.…™.k…îÀêr/', rus: '[–≤–µ-–ª–∏-–∫–æ—Ä]', meaning: '–¢–æ—Å–∫–∞ –ø–æ –∫–Ω–∏–∂–Ω—ã–º –º–∞–≥–∞–∑–∏–Ω–∞–º', example: '"The vellichor of the old bookstore was comforting."', exampleRu: '"–¢–æ—Å–∫–∞ –ø–æ —Å—Ç–∞—Ä–æ–º—É –∫–Ω–∏–∂–Ω–æ–º—É –º–∞–≥–∞–∑–∏–Ω—É –±—ã–ª–∞ —É—Ç–µ—à–∏—Ç–µ–ª—å–Ω–æ–π."' },
                    { word: 'Aquiver', trans: '/…ôÀàkw…™v.…ôr/', rus: '[—ç-–∫–≤–∏-–≤—ç]', meaning: '–î—Ä–æ–∂–∞—â–∏–π', example: '"Her voice was aquiver with emotion."', exampleRu: '"–ï—ë –≥–æ–ª–æ—Å –¥—Ä–æ–∂–∞–ª –æ—Ç —ç–º–æ—Ü–∏–π."' },
                    { word: 'Nefarious', trans: '/n…ôÀàfe…ô.ri.…ôs/', rus: '[–Ω–∏-—Ñ—ç-—Ä–∏-—ç—Å]', meaning: '–ó–ª–æ–¥–µ–π—Å–∫–∏–π', example: '"The villain had a nefarious plan."', exampleRu: '"–£ –∑–ª–æ–¥–µ—è –±—ã–ª –∑–ª–æ–¥–µ–π—Å–∫–∏–π –ø–ª–∞–Ω."' },
                    { word: 'Somnambulist', trans: '/s…ímÀàn√¶m.bj…ô.l…™st/', rus: '[—Å–æ–º-–Ω—ç–º-–±—å—é-–ª–∏—Å—Ç]', meaning: '–õ—É–Ω–∞—Ç–∏–∫', example: '"The somnambulist walked in his sleep."', exampleRu: '"–õ—É–Ω–∞—Ç–∏–∫ —Ö–æ–¥–∏–ª –≤–æ —Å–Ω–µ."' },
                    { word: 'Epoch', trans: '/ÀàiÀê.p…ík/', rus: '[–∏-–ø–æ–∫]', meaning: '–≠–ø–æ—Ö–∞', example: '"The invention marked a new epoch in history."', exampleRu: '"–ò–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –æ–∑–Ω–∞–º–µ–Ω–æ–≤–∞–ª–æ –Ω–æ–≤—É—é —ç–ø–æ—Ö—É –≤ –∏—Å—Ç–æ—Ä–∏–∏."' }
                ]
            },
            {
                id: 3,
                name: '–°—Ä–µ–¥–Ω–∏–π',
                description: '–°–ª–æ–≤–∞ —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏',
                words: [
                    { word: 'Komorebi', trans: '/Àåk…ô ä.m…ôÀàre…™.bi/', rus: '[–∫–æ-–º–æ-—Ä—ç–π-–±–∏]', meaning: '–°–≤–µ—Ç —Å–∫–≤–æ–∑—å –ª–∏—Å—Ç–≤—É', example: '"We sat in the komorebi of the forest."', exampleRu: '"–ú—ã —Å–∏–¥–µ–ª–∏ –≤ —Å–≤–µ—Ç–µ —Å–∫–≤–æ–∑—å –ª–∏—Å—Ç–≤—É –ª–µ—Å–∞."' },
                    { word: 'Defenestration', trans: '/diÀêÀåfen.…™Ààstre…™. É…ôn/', rus: '[–¥–∏-—Ñ–µ-–Ω–∏-—Å—Ç—Ä—ç–π-—à–Ω]', meaning: '–í—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –∏–∑ –æ–∫–Ω–∞', example: '"The defenestration of Prague was a historical event."', exampleRu: '"–ü—Ä–∞–∂—Å–∫–∞—è –¥–µ—Ñ–µ–Ω–µ—Å—Ç—Ä–∞—Ü–∏—è –±—ã–ª–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º —Å–æ–±—ã—Ç–∏–µ–º."' },
                    { word: 'Gossamer', trans: '/Àà…°…ís.…ô.m…ôr/', rus: '[–≥–æ-—Å—ç-–º—ç]', meaning: '–ü–∞—É—Ç–∏–Ω–∫–∞', example: '"Gossamer threads sparkled in the morning dew."', exampleRu: '"–ü–∞—É—Ç–∏–Ω–∫–∞ —Å–≤–µ—Ä–∫–∞–ª–∞ –≤ —É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–æ—Å–µ."' },
                    { word: 'Halcyon', trans: '/Ààh√¶l.si.…ôn/', rus: '[—Ö—ç–ª-—Å–∏-—ç–Ω]', meaning: '–°–ø–æ–∫–æ–π–Ω—ã–π, –±–µ–∑–º—è—Ç–µ–∂–Ω—ã–π', example: '"Those were the halcyon days of youth."', exampleRu: '"–¢–æ –±—ã–ª–∏ –±–µ–∑–º—è—Ç–µ–∂–Ω—ã–µ –¥–Ω–∏ –º–æ–ª–æ–¥–æ—Å—Ç–∏."' },
                    { word: 'Labyrinthine', trans: '/Àål√¶b.…ôÀàr…™n.Œ∏a…™n/', rus: '[–ª—ç-–±—ç-—Ä–∏–Ω-—Ñ–∞–π–Ω]', meaning: '–ó–∞–ø—É—Ç–∞–Ω–Ω—ã–π', example: '"The old city had labyrinthine streets."', exampleRu: '"–£ —Å—Ç–∞—Ä–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –±—ã–ª–∏ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–µ —É–ª–∏—Ü—ã."' },
                    { word: 'Susurrus', trans: '/ÀàsuÀês.…ôr.…ôs/', rus: '[—Å—É-—Å—ç-—Ä—ç—Å]', meaning: '–®—ë–ø–æ—Ç', example: '"The susurrus of leaves calmed her."', exampleRu: '"–®—ë–ø–æ—Ç –ª–∏—Å—Ç—å–µ–≤ —É—Å–ø–æ–∫–æ–∏–ª –µ—ë."' },
                    { word: 'Phantasmagoria', trans: '/f√¶nÀåt√¶z.m…ôÀà…°…îÀê.ri.…ô/', rus: '[—Ñ—ç–Ω-—Ç—ç–∑-–º—ç-–≥–æ-—Ä–∏-—ç]', meaning: '–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–µ –≤–∏–¥–µ–Ω–∏—è', example: '"The dream was a phantasmagoria of images."', exampleRu: '"–°–æ–Ω –±—ã–ª –ø—Ä–∏–∑—Ä–∞—á–Ω—ã–º–∏ –≤–∏–¥–µ–Ω–∏—è–º–∏ –æ–±—Ä–∞–∑–æ–≤."' },
                    { word: 'Incandescent', trans: '/Àå…™n.k√¶nÀàdes.…ônt/', rus: '[–∏–Ω-–∫—ç–Ω-–¥—ç-—Å—ç–Ω—Ç]', meaning: '–†–∞—Å–∫–∞–ª—ë–Ω–Ω—ã–π', example: '"Her incandescent smile lit up the room."', exampleRu: '"–ï—ë —Ä–∞—Å–∫–∞–ª—ë–Ω–Ω–∞—è —É–ª—ã–±–∫–∞ –æ—Å–≤–µ—Ç–∏–ª–∞ –∫–æ–º–Ω–∞—Ç—É."' },
                    { word: 'Palimpsest', trans: '/Ààp√¶l.…™m.psest/', rus: '[–ø–∞-–ª–∏–º-–ø—Å–µ—Å—Ç]', meaning: '–ü–∞–ª–∏–º–ø—Å–µ—Å—Ç, –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ—Å—Ç—å', example: '"The city is a palimpsest of different eras."', exampleRu: '"–ì–æ—Ä–æ–¥ ‚Äî —ç—Ç–æ –ø–∞–ª–∏–º–ø—Å–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —ç–ø–æ—Ö."' },
                    { word: 'Syzygy', trans: '/Ààs…™z.…ô.d íi/', rus: '[—Å–∏-–∑–∏-–¥–∂–∏]', meaning: '–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–µ–π', example: '"The syzygy of sun, earth and moon caused the eclipse."', exampleRu: '"–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ–ª–Ω—Ü–∞, –∑–µ–º–ª–∏ –∏ –ª—É–Ω—ã –≤—ã–∑–≤–∞–ª–æ –∑–∞—Ç–º–µ–Ω–∏–µ."' }
                ]
            },
            {
                id: 4,
                name: '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π',
                description: '–°–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞',
                words: [
                    { word: 'Sempiternal', trans: '/Àåsem.p…™Ààt…úÀê.n…ôl/', rus: '[—Å—ç–º-–ø–∏-—Ç—ç-–Ω–ª]', meaning: '–í–µ—á–Ω—ã–π', example: '"The sempiternal mountains stood unchanged."', exampleRu: '"–í–µ—á–Ω—ã–µ –≥–æ—Ä—ã —Å—Ç–æ—è–ª–∏ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏."' },
                    { word: 'Efflorescence', trans: '/Àåef.l…ôÀàres.…ôns/', rus: '[—ç-—Ñ–ª–æ-—Ä—ç-—Å—ç–Ω—Å]', meaning: '–¶–≤–µ—Ç–µ–Ω–∏–µ', example: '"The efflorescence of the garden was beautiful."', exampleRu: '"–¶–≤–µ—Ç–µ–Ω–∏–µ —Å–∞–¥–∞ –±—ã–ª–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º."' },
                    { word: 'Lugubrious', trans: '/luÀêÀà…°uÀê.bri.…ôs/', rus: '[–ª—É-–≥—É-–±—Ä–∏-—ç—Å]', meaning: '–ú—Ä–∞—á–Ω—ã–π', example: '"His lugubrious expression worried everyone."', exampleRu: '"–ï–≥–æ –º—Ä–∞—á–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ç—Ä–µ–≤–æ–∂–∏–ª–æ –≤—Å–µ—Ö."' },
                    { word: 'Pulchritude', trans: '/Ààp ål.kr…™.tjuÀêd/', rus: '[–ø–∞–ª-–∫—Ä–∏-—Ç—é–¥]', meaning: '–ö—Ä–∞—Å–æ—Ç–∞', example: '"The pulchritude of the landscape was breathtaking."', exampleRu: '"–ö—Ä–∞—Å–æ—Ç–∞ –ø–µ–π–∑–∞–∂–∞ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–ª–∞ –¥—É—Ö."' },
                    { word: 'Sesquipedalian', trans: '/Àåses.kw…™.p…™Ààde…™.li.…ôn/', rus: '[—Å—ç—Å-–∫–≤–∏-–ø–∏-–¥—ç–π-–ª–∏-—ç–Ω]', meaning: '–ú–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–π', example: '"His sesquipedalian speeches bored the audience."', exampleRu: '"–ï–≥–æ –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–µ —Ä–µ—á–∏ —É—Ç–æ–º–ª—è–ª–∏ –∞—É–¥–∏—Ç–æ—Ä–∏—é."' },
                    { word: 'Saudade', trans: '/sa äÀàd…ëÀê.de…™/', rus: '[—Å–∞—É-–¥–∞-–¥—ç–π]', meaning: '–ù–æ—Å—Ç–∞–ª—å–≥–∏—è', example: '"Saudade for her childhood never left her."', exampleRu: '"–ù–æ—Å—Ç–∞–ª—å–≥–∏—è –ø–æ –¥–µ—Ç—Å—Ç–≤—É –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∏–¥–∞–ª–∞ –µ—ë."' },
                    { word: 'Trouvaille', trans: '/truÀêÀàva…™/', rus: '[—Ç—Ä—É-–≤–∞–π]', meaning: '–°—á–∞—Å—Ç–ª–∏–≤–∞—è –Ω–∞—Ö–æ–¥–∫–∞', example: '"The antique shop was full of trouvailles."', exampleRu: '"–ê–Ω—Ç–∏–∫–≤–∞—Ä–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω –±—ã–ª –ø–æ–ª–æ–Ω —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –Ω–∞—Ö–æ–¥–æ–∫."' },
                    { word: 'Numinous', trans: '/ÀànjuÀê.m…™.n…ôs/', rus: '[–Ω—å—é-–º—ç-–Ω—ç—Å]', meaning: '–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, —Å–≤—è—â–µ–Ω–Ω—ã–π', example: '"The numinous atmosphere of the cathedral impressed him."', exampleRu: '"–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å–æ–±–æ—Ä–∞ –≤–ø–µ—á–∞—Ç–ª–∏–ª–∞ –µ–≥–æ."' },
                    { word: 'Meraki', trans: '/meÀàr√¶.ki/', rus: '[–º–∏-—Ä—ç-–∫–∏]', meaning: '–î–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Å –¥—É—à–æ–π', example: '"She cooked with meraki, putting her heart into every dish."', exampleRu: '"–û–Ω–∞ –≥–æ—Ç–æ–≤–∏–ª–∞ —Å –¥—É—à–æ–π, –≤–∫–ª–∞–¥—ã–≤–∞—è —Å–µ—Ä–¥—Ü–µ –≤ –∫–∞–∂–¥–æ–µ –±–ª—é–¥–æ."' },
                    { word: 'Drapetomania', trans: '/Àådr√¶p.…™.t…ôÀàme…™.ni.…ô/', rus: '[–¥—Ä—ç-–ø–∏-—Ç—ç-–º—ç–π-–Ω–∏-—ç]', meaning: '–°—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ —Å–≤–æ–±–æ–¥–µ', example: '"His drapetomania led him to travel the world."', exampleRu: '"–ï–≥–æ —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ —Å–≤–æ–±–æ–¥–µ –ø—Ä–∏–≤–µ–ª–æ –µ–≥–æ –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –º–∏—Ä—É."' }
                ]
            },
            {
                id: 5,
                name: '–≠–∫—Å–ø–µ—Ä—Ç',
                description: '–°–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞',
                words: [
                    { word: 'Quiddity', trans: '/Ààkw…™d.…™.ti/', rus: '[–∫–≤–∏-–¥–∏-—Ç–∏]', meaning: '–°—É—Ç—å, —Å—É—â–Ω–æ—Å—Ç—å', example: '"He grasped the quiddity of the problem instantly."', exampleRu: '"–û–Ω —Å—Ä–∞–∑—É —É—Ö–≤–∞—Ç–∏–ª —Å—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã."' },
                    { word: 'Apricity', trans: '/Ààe…™.pr…™s.…™.ti/', rus: '[—ç–π-–ø—Ä–∏-—Å–∏-—Ç–∏]', meaning: '–¢–µ–ø–ª–æ –∑–∏–º–Ω–µ–≥–æ —Å–æ–ª–Ω—Ü–∞', example: '"She basked in the apricity of January."', exampleRu: '"–û–Ω–∞ –≥—Ä–µ–ª–∞—Å—å –≤ —Ç–µ–ø–ª–µ —è–Ω–≤–∞—Ä—Å–∫–æ–≥–æ —Å–æ–ª–Ω—Ü–∞."' },
                    { word: 'Monachopsis', trans: '/Àåm…ín.…ôÀàk…íp.s…™s/', rus: '[–º–æ-–Ω–∞-–∫–æ–ø-—Å–∏—Å]', meaning: '–¢–æ—Å–∫–∞ –ø–æ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–º—É –º–µ—Å—Ç—É', example: '"Monachopsis overwhelmed him in the new city."', exampleRu: '"–¢–æ—Å–∫–∞ –ø–æ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–º—É –º–µ—Å—Ç—É –ø–µ—Ä–µ–ø–æ–ª–Ω—è–ª–∞ –µ–≥–æ –≤ –Ω–æ–≤–æ–º –≥–æ—Ä–æ–¥–µ."' },
                    { word: 'Lethologica', trans: '/ÀåleŒ∏.…ôÀàl…íd í.…™.k…ô/', rus: '[–ª–µ-—Ñ–æ-–ª–æ-–¥–∂–∏-–∫–∞]', meaning: '–ó–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å', example: '"Lethologica struck when he needed the word most."', exampleRu: '"–ó–∞–±—ã–≤—á–∏–≤–æ—Å—Ç—å –Ω–∞—Å—Ç–∏–≥–ª–∞ –µ–≥–æ, –∫–æ–≥–¥–∞ –æ–Ω –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω—É–∂–¥–∞–ª—Å—è –≤ —Å–ª–æ–≤–µ."' },
                    { word: 'Jouska', trans: '/Ààd íuÀê.sk…ô/', rus: '[–¥–∂—É-—Å–∫–∞]', meaning: '–í–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä', example: '"He often engaged in jouska while showering."', exampleRu: '"–û–Ω —á–∞—Å—Ç–æ –≤—ë–ª –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –ø–æ–¥ –¥—É—à–µ–º."' },
                    { word: 'Kenopsia', trans: '/keÀàn…íp.si.…ô/', rus: '[–∫–∏-–Ω–æ–ø-—Å–∏-—ç]', meaning: '–¢—Ä–µ–≤–æ–≥–∞ –æ—Ç –ø—É—Å—Ç—ã—Ö –º–µ—Å—Ç', example: '"The kenopsia of the abandoned mall disturbed him."', exampleRu: '"–¢—Ä–µ–≤–æ–≥–∞ –æ—Ç –ø—É—Å—Ç–æ–≥–æ –∑–∞–±—Ä–æ—à–µ–Ω–Ω–æ–≥–æ –º–æ–ª–∞ —Ç—Ä–µ–≤–æ–∂–∏–ª–∞ –µ–≥–æ."' },
                    { word: 'Chrysalism', trans: '/Ààkr…™s.…ô.l…™z.…ôm/', rus: '[–∫—Ä–∏-—Å–∞-–ª–∏-–∑—ç–º]', meaning: '–£—é—Ç –≤–æ –≤—Ä–µ–º—è –¥–æ–∂–¥—è', example: '"She enjoyed the chrysalism of her room."', exampleRu: '"–û–Ω–∞ –Ω–∞—Å–ª–∞–∂–¥–∞–ª–∞—Å—å —É—é—Ç–æ–º —Å–≤–æ–µ–π –∫–æ–º–Ω–∞—Ç—ã –≤–æ –≤—Ä–µ–º—è –¥–æ–∂–¥—è."' },
                    { word: 'Anecdoche', trans: '/…ôÀànek.d…ô.ke…™/', rus: '[—ç-–Ω—ç–∫-–¥—ç-–∫—ç–π]', meaning: '–†–∞–∑–≥–æ–≤–æ—Ä, –≥–¥–µ –Ω–∏–∫—Ç–æ –Ω–µ —Å–ª—É—à–∞–µ—Ç', example: '"The meeting was just anecdoche."', exampleRu: '"–í—Å—Ç—Ä–µ—á–∞ –±—ã–ª–∞ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–º, –≥–¥–µ –Ω–∏–∫—Ç–æ –Ω–µ —Å–ª—É—à–∞–ª."' },
                    { word: 'Ellipsism', trans: '/…™Ààl…™p.s…™z.…ôm/', rus: '[–∏-–ª–∏–ø-—Å–∏-–∑—ç–º]', meaning: '–¢–æ—Å–∫–∞ –ø–æ –Ω–µ–ø—Ä–æ–∂–∏—Ç—ã–º –º–æ–º–µ–Ω—Ç–∞–º', example: '"Ellipsism haunted him in his old age."', exampleRu: '"–¢–æ—Å–∫–∞ –ø–æ –Ω–µ–ø—Ä–æ–∂–∏—Ç—ã–º –º–æ–º–µ–Ω—Ç–∞–º –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–ª–∞ –µ–≥–æ –≤ —Å—Ç–∞—Ä–æ—Å—Ç–∏."' },
                    { word: 'Mauerbauertraurigkeit', trans: '/Ààma ä.…ôr.ba ä.…ôrÀàtra ä.…ôr.…™k.a…™t/', rus: '[–º–∞—É-—ç—Ä-–±–∞—É-—ç—Ä-—Ç—Ä–∞—É-—ç—Ä-–∏–∫–∞–π—Ç]', meaning: '–ñ–µ–ª–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–µ–Ω—ã', example: '"His mauerbauertraurigkeit kept everyone away."', exampleRu: '"–ï–≥–æ –∂–µ–ª–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–µ–Ω—ã –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–ª–æ –≤—Å–µ—Ö."' }
                ]
            }
        ];
        
        let currentLevel = 0;
        let currentCard = 0;
        let showRusTrans = false;
        let lessonStartTime = null;
        let isFlipped = false;
        
        const STORAGE_KEY = 'linguaparrot_progress_v2';
        
        function haptic() {
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
        }
        
        function getDefaultProgress() {
            return {
                dailyMinutes: 0,
                wordsLearned: 0,
                streak: 0,
                lastVisit: new Date().toISOString(),
                levels: levels.map(l => ({ id: l.id, completed: false, wordsLearned: 0 })),
                currentLesson: null
            };
        }
        
        function saveProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            const progress = saved ? JSON.parse(saved) : getDefaultProgress();
            
            progress.dailyMinutes = parseInt(document.getElementById('dailyProgress').textContent);
            progress.wordsLearned = parseInt(document.getElementById('wordsCount').textContent);
            progress.streak = parseInt(document.getElementById('streakCount').textContent);
            progress.lastVisit = new Date().toISOString();
            
            if (progress.levels[currentLevel]) {
                progress.levels[currentLevel].wordsLearned = currentCard;
            }
            
            if (document.getElementById('lessonScreen').classList.contains('active')) {
                progress.currentLesson = {
                    levelIndex: currentLevel,
                    cardIndex: currentCard,
                    startTime: lessonStartTime
                };
            } else {
                progress.currentLesson = null;
            }
            
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
            
            tg.sendData(JSON.stringify({
                action: 'save_progress',
                data: progress
            }));
        }
        
        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            const progress = saved ? JSON.parse(saved) : getDefaultProgress();
            
            document.getElementById('dailyProgress').textContent = progress.dailyMinutes || 0;
            document.getElementById('wordsCount').textContent = progress.wordsLearned || 0;
            document.getElementById('streakCount').textContent = progress.streak || 0;
            document.getElementById('progressBar').style.width = Math.min(((progress.dailyMinutes || 0) / 15 * 100), 100) + '%';
            
            renderLevels(progress);
            
            if (progress.currentLesson && progress.currentLesson.levelIndex !== undefined) {
                setTimeout(() => {
                    if (confirm(`–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —É—Ä–æ–∫ (–£—Ä–æ–≤–µ–Ω—å ${progress.currentLesson.levelIndex + 1}, —Å–ª–æ–≤–æ ${progress.currentLesson.cardIndex + 1}/${levels[progress.currentLesson.levelIndex].words.length}). –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?`)) {
                        resumeLesson(progress.currentLesson);
                    }
                }, 500);
            }
            
            return progress;
        }
        
        function renderLevels(progress) {
            const grid = document.getElementById('levelGrid');
            grid.innerHTML = '';
            
            levels.forEach((level, index) => {
                const levelProgress = progress.levels[index] || { completed: false, wordsLearned: 0 };
                const prevCompleted = index === 0 || (progress.levels[index - 1] && progress.levels[index - 1].completed);
                const isLocked = !prevCompleted && !levelProgress.completed;
                
                const card = document.createElement('div');
                card.className = `level-card ${levelProgress.completed ? 'active' : ''} ${isLocked ? 'locked' : ''}`;
                card.onclick = () => !isLocked && selectLevel(index);
                
                card.innerHTML = `
                    <div class="level-status">${levelProgress.completed ? '‚úÖ' : (isLocked ? 'üîí' : '')}</div>
                    <div class="level-number">${level.id}</div>
                    <div class="level-name">${level.name}</div>
                    <div class="level-progress">${levelProgress.wordsLearned}/${level.words.length} —Å–ª–æ–≤</div>
                `;
                
                grid.appendChild(card);
            });
        }
        
        function selectLevel(index) {
            haptic();
            currentLevel = index;
            currentCard = 0;
            isFlipped = false;
            lessonStartTime = Date.now();
            updateCard();
            generateDots();
            document.getElementById('mainScreen').classList.remove('active');
            document.getElementById('lessonScreen').classList.add('active');
            tg.MainButton.setText('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ‚úÖ');
            tg.MainButton.hide();
        }
        
        function resumeLesson(lessonData) {
            currentLevel = lessonData.levelIndex;
            currentCard = lessonData.cardIndex;
            lessonStartTime = Date.now();
            updateCard();
            generateDots();
            document.getElementById('mainScreen').classList.remove('active');
            document.getElementById('lessonScreen').classList.add('active');
            tg.MainButton.setText('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ‚úÖ');
            if (currentCard > 0) tg.MainButton.show();
        }
        
        function generateDots() {
            const container = document.getElementById('progressDots');
            container.innerHTML = '';
            const wordCount = levels[currentLevel].words.length;
            
            for (let i = 0; i < wordCount; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot';
                container.appendChild(dot);
            }
        }
        
        function setMode(btn, mode) {
            haptic();
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        
        function openChat() {
            haptic();
            tg.sendData(JSON.stringify({ action: 'open_chat' }));
            tg.showAlert('AI-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω! ü¶ú');
        }
        
        function updateCard() {
            const w = levels[currentLevel].words[currentCard];
            document.getElementById('cardWord').textContent = w.word;
            document.getElementById('cardTrans').textContent = w.trans;
            document.getElementById('cardRusTrans').textContent = w.rus;
            document.getElementById('cardMeaning').textContent = w.meaning;
            document.getElementById('detailExample').textContent = w.example;
            document.getElementById('detailTranslation').textContent = w.exampleRu;
            
            document.getElementById('flashcard').classList.remove('flipped');
            document.getElementById('detailCard').classList.remove('show');
            
            const dots = document.querySelectorAll('.dot');
            dots.forEach((d, i) => {
                d.classList.remove('active', 'completed');
                if (i < currentCard) d.classList.add('completed');
                if (i === currentCard) d.classList.add('active');
            });
            
            const isLast = currentCard >= levels[currentLevel].words.length - 1;
            tg.MainButton.setText(isLast ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫ üéâ' : '–°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ ‚Üí');
        }
        
        function flipCard() {
            if (isFlipped) return;
            haptic();
            isFlipped = true;
            document.getElementById('flashcard').classList.add('flipped');
            saveProgress();
            
            setTimeout(() => {
                document.getElementById('detailCard').classList.add('show');
                tg.MainButton.show();
            }, 300);
        }
        
        function toggleTrans() {
            haptic();
            showRusTrans = !showRusTrans;
            document.getElementById('transToggle').classList.toggle('active');
            document.getElementById('cardRusTrans').style.display = showRusTrans ? 'block' : 'none';
        }
        
        function closeLesson() {
            haptic();
            if (confirm('–ü—Ä–µ—Ä–≤–∞—Ç—å —É—Ä–æ–∫? –ü—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω.')) {
                saveProgress();
                document.getElementById('lessonScreen').classList.remove('active');
                document.getElementById('mainScreen').classList.add('active');
                tg.MainButton.hide();
                const progress = JSON.parse(localStorage.getItem(STORAGE_KEY));
                renderLevels(progress);
            }
        }
        
        function finishLesson() {
            haptic();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const currentDaily = parseInt(document.getElementById('dailyProgress').textContent);
            const newDaily = currentDaily + 5;
            document.getElementById('dailyProgress').textContent = newDaily;
            document.getElementById('progressBar').style.width = Math.min((newDaily / 15 * 100), 100) + '%';
            
            const currentWords = parseInt(document.getElementById('wordsCount').textContent);
            const newWords = currentWords + levels[currentLevel].words.length;
            document.getElementById('wordsCount').textContent = newWords;
            
            // –û—Ç–º–µ—á–∞–µ–º —É—Ä–æ–≤–µ–Ω—å –∫–∞–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π
            const saved = localStorage.getItem(STORAGE_KEY);
            const progress = saved ? JSON.parse(saved) : getDefaultProgress();
            progress.levels[currentLevel].completed = true;
            progress.levels[currentLevel].wordsLearned = levels[currentLevel].words.length;
            progress.dailyMinutes = newDaily;
            progress.wordsLearned = newWords;
            progress.currentLesson = null;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
            
            tg.sendData(JSON.stringify({
                action: 'level_complete',
                level: currentLevel + 1,
                words: levels[currentLevel].words.length,
                xp: 100 + (currentLevel * 20)
            }));
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('mainScreen').classList.add('active');
            tg.MainButton.hide();
            renderLevels(progress);
        }
        
        tg.MainButton.onClick(() => {
            haptic();
            if (!isFlipped) {
                flipCard();
                return;
            }
            
            currentCard++;
            saveProgress();
            
            if (currentCard >= levels[currentLevel].words.length) {
                const timeSpent = Math.floor((Date.now() - lessonStartTime) / 1000);
                const mins = Math.floor(timeSpent / 60);
                const secs = timeSpent % 60;
                document.getElementById('timeValue').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                document.getElementById('resultWords').textContent = levels[currentLevel].words.length;
                document.getElementById('resultXP').textContent = `+${100 + (currentLevel * 20)} XP`;
                document.getElementById('resultSubtitle').textContent = `–£—Ä–æ–≤–µ–Ω—å "${levels[currentLevel].name}" –ø—Ä–æ–π–¥–µ–Ω!`;
                
                document.getElementById('lessonScreen').classList.remove('active');
                document.getElementById('resultScreen').classList.add('active');
                tg.MainButton.hide();
            } else {
                isFlipped = false;
                updateCard();
                tg.MainButton.hide();
            }
        });
        
        window.addEventListener('beforeunload', () => {
            if (document.getElementById('lessonScreen').classList.contains('active')) {
                saveProgress();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
        });
    </script>
</body>
</html>
